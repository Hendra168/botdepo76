//SAYA SARANKAN UNTUK
//MENGGUNAKAN APLIKASI
//QUICK EDIT

"use strict";
const { default: makeWASocket, DisconnectReason, useSingleFileAuthState, makeInMemoryStore, downloadContentFromMessage, jidDecode, generateForwardMessageContent, generateWAMessageFromContent } = require("@adiwajshing/baileys")
const figlet = require("figlet");
const fs = require("fs");
const chalk = require('chalk')
const logg = require('pino')
const { serialize, fetchJson, sleep, getBuffer } = require("./SCRIPT BY RAMAA GNZZ/myfunc");
const { nocache, uncache } = require('./SCRIPT BY RAMAA GNZZ/chache.js');

let setting = JSON.parse(fs.readFileSync('./setting.json'));
let session = `./${setting.sessionName}.json`
const { state, saveState } = useSingleFileAuthState(session)

function _0x3d37(_0x5850f5,_0xefced){var _0x4d06ee=_0x389c();return _0x3d37=function(_0x3601fc,_0x276639){_0x3601fc=_0x3601fc-(0x142*0xb+-0x2193+0x6*0x389);var _0x4a3d74=_0x4d06ee[_0x3601fc];if(_0x3d37['dHYlal']===undefined){var _0x507b9b=function(_0x300d43){var _0x1d561d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x2da752='',_0x5acfc5='',_0x5a494a=_0x2da752+_0x507b9b;for(var _0x1d4695=-0x17*-0x4b+-0x171a+0x105d,_0x313d5a,_0x442da3,_0x5ac402=-0x6*-0x232+-0x4*-0x155+-0x1280;_0x442da3=_0x300d43['charAt'](_0x5ac402++);~_0x442da3&&(_0x313d5a=_0x1d4695%(0x1*-0x158f+0xb2*-0x29+0x3215)?_0x313d5a*(0x254e+-0x1*0x4eb+-0x2023)+_0x442da3:_0x442da3,_0x1d4695++%(0x68b+-0x19d8+0x1351))?_0x2da752+=_0x5a494a['charCodeAt'](_0x5ac402+(-0x126a+-0x4*-0x62b+-0x638))-(-0x1*-0x1eb7+-0x16f+0x1*-0x1d3e)!==0x2dd*-0x7+-0x1ba8+0x2fb3?String['fromCharCode'](-0x705+-0x1437+0x1c3b&_0x313d5a>>(-(-0x1bde+0x2*-0xac9+0x3172)*_0x1d4695&0x859*0x2+0x1ef3+-0x2f9f)):_0x1d4695:0x151*0x7+0x1*0x216e+-0x2aa5){_0x442da3=_0x1d561d['indexOf'](_0x442da3);}for(var _0x18bbe7=0x2178+0x227+-0xb*0x33d,_0x2ea9f6=_0x2da752['length'];_0x18bbe7<_0x2ea9f6;_0x18bbe7++){_0x5acfc5+='%'+('00'+_0x2da752['charCodeAt'](_0x18bbe7)['toString'](0xcb*-0x24+0x1f53+0x5*-0x8b))['slice'](-(-0x1df+-0xa66+0xc47));}return decodeURIComponent(_0x5acfc5);};_0x3d37['NOjUkY']=_0x507b9b,_0x5850f5=arguments,_0x3d37['dHYlal']=!![];}var _0x38c204=_0x4d06ee[0x1*0x1945+-0x1*0x1ac0+0x17b],_0x227ffe=_0x3601fc+_0x38c204,_0x595a6c=_0x5850f5[_0x227ffe];if(!_0x595a6c){var _0x94ac8c=function(_0x373dab){this['feVRZE']=_0x373dab,this['bXkyGI']=[-0x935*0x3+0x1813+-0x38d*-0x1,-0x13*0xeb+-0x190*-0xf+-0x1*0x5ff,0x1*-0xb17+0xd4+0xa43],this['lXOsdr']=function(){return'newState';},this['TzKvly']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['TrjlQM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x94ac8c['prototype']['EOdGaR']=function(){var _0xaad6e=new RegExp(this['TzKvly']+this['TrjlQM']),_0x506d92=_0xaad6e['test'](this['lXOsdr']['toString']())?--this['bXkyGI'][0x2*0xa01+-0x2134+0xd33]:--this['bXkyGI'][0xf42+0x1*-0x991+-0x5b1];return this['ooBhjX'](_0x506d92);},_0x94ac8c['prototype']['ooBhjX']=function(_0x281409){if(!Boolean(~_0x281409))return _0x281409;return this['GFbrNU'](this['feVRZE']);},_0x94ac8c['prototype']['GFbrNU']=function(_0x869a3c){for(var _0x38d000=0x2073+-0x1fff+-0x74,_0x2aaafb=this['bXkyGI']['length'];_0x38d000<_0x2aaafb;_0x38d000++){this['bXkyGI']['push'](Math['round'](Math['random']())),_0x2aaafb=this['bXkyGI']['length'];}return _0x869a3c(this['bXkyGI'][0x333*0x2+-0x69c+0x36*0x1]);},new _0x94ac8c(_0x3d37)['EOdGaR'](),_0x4a3d74=_0x3d37['NOjUkY'](_0x4a3d74),_0x5850f5[_0x227ffe]=_0x4a3d74;}else _0x4a3d74=_0x595a6c;return _0x4a3d74;},_0x3d37(_0x5850f5,_0xefced);}(function(_0x286af4,_0x609db6){var _0x3c1490=_0x286af4();function _0x47b0b6(_0x3699be,_0x152144,_0x353f8d,_0x3bf3f5){return _0x3d37(_0x353f8d- -0xb4,_0x3bf3f5);}function _0x2602a9(_0x5c410,_0x22e9c7,_0x2b4dfc,_0x9883ed){return _0x3d37(_0x22e9c7- -0x30e,_0x5c410);}while(!![]){try{var _0x4be687=-parseInt(_0x47b0b6(0xef,0xcb,0xe2,0xd0))/(0x1f6e+-0x1*-0x22c5+-0x4232)*(parseInt(_0x47b0b6(0xe6,0xcc,0xd4,0xc1))/(-0x1e74+0x1f9e+0x2*-0x94))+parseInt(_0x2602a9(-0x16c,-0x16a,-0x170,-0x16a))/(0x521+0xfd1*0x1+-0x14ef)+parseInt(_0x2602a9(-0x156,-0x16c,-0x17d,-0x173))/(-0x5*0x794+0xa1f+0x1bc9)*(parseInt(_0x47b0b6(0xe4,0x10d,0xf5,0xf9))/(-0x1fe4+-0x1eb*0x13+0x445a))+-parseInt(_0x2602a9(-0x19d,-0x191,-0x177,-0x195))/(0x18c5+0x1*-0x1369+-0x2*0x2ab)*(parseInt(_0x2602a9(-0x177,-0x168,-0x177,-0x157))/(0x3*-0x4cc+-0x2b*0x8d+0x261a))+parseInt(_0x2602a9(-0x15f,-0x16d,-0x16b,-0x154))/(-0x12a*0x9+0x185*0xc+-0x7ba)+-parseInt(_0x47b0b6(0xfd,0xdb,0xf4,0xf6))/(0x54a+-0x2*-0x1+-0x543)*(parseInt(_0x47b0b6(0xe8,0xd4,0xec,0xfc))/(-0x1b4*0xd+-0x1c8*0xa+0x27fe))+parseInt(_0x2602a9(-0x162,-0x16f,-0x182,-0x15f))/(-0xa79+0x7*-0x593+0x3189)*(parseInt(_0x47b0b6(0xee,0xea,0xdb,0xf0))/(-0x1e8f+0x3*0x565+0xe6c));if(_0x4be687===_0x609db6)break;else _0x3c1490['push'](_0x3c1490['shift']());}catch(_0x1a2fb5){_0x3c1490['push'](_0x3c1490['shift']());}}}(_0x389c,-0x1*0x38ac9+0x2bcec+0x29ee0));var _0x2a7676=(function(){var _0x2ebb4f=!![];return function(_0xdf9d95,_0x4d123e){var _0x5e49fd=_0x2ebb4f?function(){function _0x111c99(_0x18efdf,_0x5ea0ed,_0x3fd654,_0x2aeb6a){return _0x3d37(_0x18efdf-0xbe,_0x2aeb6a);}if(_0x4d123e){var _0x14389b=_0x4d123e[_0x111c99(0x25a,0x266,0x24c,0x251)](_0xdf9d95,arguments);return _0x4d123e=null,_0x14389b;}}:function(){};return _0x2ebb4f=![],_0x5e49fd;};}()),_0x559f4f=_0x2a7676(this,function(){var _0x2d426b={};_0x2d426b[_0x4bbce7(0x46a,0x482,0x46e,0x458)]=_0x4bbce7(0x456,0x447,0x46f,0x45a)+'+$';function _0x4af0fd(_0x1917d1,_0x182d7e,_0x471048,_0x7b8b0e){return _0x3d37(_0x471048- -0xfb,_0x182d7e);}function _0x4bbce7(_0x209e98,_0x22fcb6,_0x182a60,_0x368ec2){return _0x3d37(_0x209e98-0x2c5,_0x368ec2);}var _0x477b59=_0x2d426b;return _0x559f4f[_0x4bbce7(0x448,0x45c,0x460,0x42f)]()[_0x4bbce7(0x470,0x465,0x45f,0x46a)](_0x477b59[_0x4bbce7(0x46a,0x481,0x461,0x45a)])[_0x4bbce7(0x448,0x442,0x44e,0x45c)]()[_0x4bbce7(0x443,0x453,0x442,0x447)+'r'](_0x559f4f)[_0x4bbce7(0x470,0x485,0x47c,0x475)](_0x477b59['tyjpQ']);});function _0x3c1956(_0x52f2d9,_0x45338b,_0x2beb47,_0x3159f8){return _0x3d37(_0x52f2d9- -0x1f7,_0x3159f8);}function _0x389c(){var _0x1f9ddc=['uMfTysbhBM5A','v0Hbvfnbufa','ru5kvufmifnduG','D2HPDgu','Ag9YAxPVBNrHBa','AxrHBgLJ','mJaWmdi4zKDfqM96','4OcIww91vhvIzq','kcGOlISPkYKRkq','idOG','Ew91Da','ifjHBwfHieDUwG','ie1ftKrbuefusW','mw9Zs3rTuG','su5jifnftefjtG','mdG1nZKXmJiWmq','qsbhtK5Aifnjta','BwfNzw50yq','tKDjifnbwueGtq','yxbWBhK','Dgv4Dfn5BMm','yM9Sza','mJjyAKrbz1q','mtbVterZv1O','oda5odK2rwfsDMvf','nde0ote2rLDKywne','v0fstKLorW','ndi4ntaYEKv2r1LY','DhLQCfe','ntu3mduZquXyBNPM','Bg9N','mtyXotq1mxHKre1ZEa','mtb2t1jfC1C','qNjLywS','C2vHCMnO','ruXbtfvjifDiqq','z3jLzw4','svbuieLosEkAOo+4JWPk','DMvYDgLJywXmyq','nKfWEvHyCa','y29UC3rYDwn0BW','quHlqu4Gsfvcvq','wYbnywrLiej5ia','zgvMyxvSDa','uMfTyweGr25UwG','Dg9tDhjPBMC','D2LKDgG','vfnbufaG','CMvK','D2HPDgvZCgfJzq','mJeYnJeYqwTwzwrT'];_0x389c=function(){return _0x1f9ddc;};return _0x389c();}function _0x5eea95(_0x27f58e,_0x52ae58,_0x458b7c,_0x2226bf){return _0x3d37(_0x52ae58-0xe6,_0x27f58e);}_0x559f4f();var _0x2f61eb={};_0x2f61eb['font']='Standard',_0x2f61eb[_0x5eea95(0x261,0x273,0x26f,0x267)+'Layout']=_0x5eea95(0x266,0x267,0x270,0x25b),_0x2f61eb[_0x3c1956(-0x7b,-0x66,-0x8b,-0x8c)+_0x3c1956(-0x64,-0x4e,-0x76,-0x75)]=_0x5eea95(0x250,0x267,0x27a,0x24f),_0x2f61eb[_0x5eea95(0x280,0x26a,0x275,0x252)]=0x50,_0x2f61eb[_0x5eea95(0x260,0x26d,0x26e,0x25e)+_0x3c1956(-0x4d,-0x66,-0x4f,-0x54)]=![],console[_0x3c1956(-0x50,-0x61,-0x44,-0x61)](chalk[_0x5eea95(0x280,0x284,0x288,0x287)][_0x3c1956(-0x7d,-0x93,-0x8a,-0x92)](figlet[_0x3c1956(-0x5a,-0x46,-0x5c,-0x72)](_0x3c1956(-0x6e,-0x57,-0x77,-0x88),_0x2f61eb))),console['log'](chalk['yellow'](chalk[_0x3c1956(-0x71,-0x76,-0x6e,-0x63)](_0x5eea95(0x26d,0x266,0x26c,0x277)+'Ramaa\x20GnnZ'+'\x20]')+'\x0a\x0a'+chalk['italic']['magenta']('â€¢Author')+_0x5eea95(0x27d,0x278,0x28f,0x26e)+chalk['white']('RonzzOfc\x20x'+_0x3c1956(-0x63,-0x5f,-0x4e,-0x6b))+'\x0a'+chalk[_0x5eea95(0x260,0x274,0x276,0x26d)][_0x3c1956(-0x5d,-0x65,-0x4f,-0x73)](_0x5eea95(0x27b,0x276,0x274,0x26f))+_0x5eea95(0x26e,0x278,0x27f,0x27e)+chalk['white'](_0x5eea95(0x254,0x268,0x262,0x27a))+'\x0a\x0a'+chalk[_0x3c1956(-0x69,-0x66,-0x5c,-0x7d)][_0x3c1956(-0x5d,-0x55,-0x4b,-0x74)](_0x3c1956(-0x54,-0x5b,-0x45,-0x5d))+_0x3c1956(-0x65,-0x72,-0x6a,-0x5b)+chalk[_0x3c1956(-0x6b,-0x60,-0x71,-0x5d)]('DILARANG\x20M'+_0x3c1956(-0x6c,-0x58,-0x6b,-0x70)+_0x3c1956(-0x7c,-0x79,-0x92,-0x75)+'IKA\x20KALIAN'+_0x3c1956(-0x62,-0x5d,-0x70,-0x71)+'AN\x20SCRIPT\x20'+_0x3c1956(-0x60,-0x4d,-0x51,-0x61)+'\x20DARI\x20RAMA'+_0x5eea95(0x289,0x27f,0x267,0x294)+_0x3c1956(-0x78,-0x84,-0x81,-0x63)+_0x5eea95(0x296,0x281,0x27f,0x277)+_0x3c1956(-0x7e,-0x96,-0x77,-0x81)+_0x3c1956(-0x72,-0x8b,-0x73,-0x80))+'\x0a'+chalk[_0x3c1956(-0x69,-0x56,-0x5f,-0x6f)]['magenta'](_0x3c1956(-0x6d,-0x80,-0x6e,-0x59))+_0x5eea95(0x27c,0x278,0x27f,0x27a)+chalk[_0x5eea95(0x26e,0x272,0x27f,0x26a)](_0x5eea95(0x284,0x27e,0x280,0x278)+'79')+'\x0a'));

const memory = makeInMemoryStore({ logger: logg().child({ level: 'fatal', stream: 'store' }) })

const connectToWhatsApp = async () => {
const ramz = makeWASocket({
printQRInTerminal: true,
logger: logg({ level: 'fatal' }),
browser: ['YT :Ramaa Gnnz','Safari','1.0.0'],
auth: state
})
memory.bind(ramz.ev)

ramz.ev.on('messages.upsert', async m => {
var msg = m.messages[0]
if (!m.messages) return;
if (msg.key && msg.key.remoteJid == "status@broadcast") return
msg = serialize(ramz, msg)
msg.isBaileys = msg.key.id.startsWith('BAE5') || msg.key.id.startsWith('3EB0')
require('./byRama')(ramz, msg, m, setting, memory)
})

ramz.ev.on('creds.update', () => saveState)

ramz.reply = (from, content, msg) => ramz.sendMessage(from, { text: content }, { quoted: msg })

ramz.ev.on('connection.update', (update) => {
console.log('Connection update:', update)
if (update.connection === 'open') 
console.log("Connected with " + ramz.user.id)
else if (update.connection === 'close')
connectToWhatsApp()
})



ramz.sendImage = async (jid, path, caption = '', quoted = '', options) => {
let buffer = Buffer.isBuffer(path) ? path : /^data:.*?\/.*?;base64,/i.test(path) ? Buffer.from(path.split`,`[1], 'base64') : /^https?:\/\//.test(path) ? await (await getBuffer(path)) : fs.existsSync(path) ? fs.readFileSync(path) : Buffer.alloc(0)
return await ramz.sendMessage(jid, { image: buffer, caption: caption, ...options }, { quoted })
}

ramz.decodeJid = (jid) => {
if (!jid) return jid
if (/:\d+@/gi.test(jid)) {
let decode = jidDecode(jid) || {}
return decode.user && decode.server && decode.user + '@' + decode.server || jid
} else return jid
}

ramz.sendTextMentions = async (jid, teks, mention, quoted = '') => {
        	return ramz.sendMessage(jid, { text: teks, mentions: mention }, { quoted })
        }

ramz.downloadAndSaveMediaMessage = async(msg, type_file, path_file) => {
           if (type_file === 'image') {
             var stream = await downloadContentFromMessage(msg.message.imageMessage || msg.message.extendedTextMessage.contextInfo.quotedMessage.imageMessage, 'image')
             let buffer = Buffer.from([])
             for await(const chunk of stream) {
               buffer = Buffer.concat([buffer, chunk])
             }
             fs.writeFileSync(path_file, buffer)
             return path_file
           } else if (type_file === 'video') {
             var stream = await downloadContentFromMessage(msg.message.videoMessage || msg.message.extendedTextMessage.contextInfo.quotedMessage.videoMessage, 'video')
             let buffer = Buffer.from([])
             for await(const chunk of stream) {
               buffer = Buffer.concat([buffer, chunk])
             }
             fs.writeFileSync(path_file, buffer)
             return path_file
           } else if (type_file === 'sticker') {
             var stream = await downloadContentFromMessage(msg.message.stickerMessage || msg.message.extendedTextMessage.contextInfo.quotedMessage.stickerMessage, 'sticker')
             let buffer = Buffer.from([])
             for await(const chunk of stream) {
               buffer = Buffer.concat([buffer, chunk])
             }
             fs.writeFileSync(path_file, buffer)
             return path_file
           } else if (type_file === 'audio') {
             var stream = await downloadContentFromMessage(msg.message.audioMessage || msg.message.extendedTextMessage.contextInfo.quotedMessage.audioMessage, 'audio')
             let buffer = Buffer.from([])
             for await(const chunk of stream) {
               buffer = Buffer.concat([buffer, chunk])
             }
             fs.writeFileSync(path_file, buffer)
             return path_file
           }
        }

return ramz
}
connectToWhatsApp()
.catch(err => console.log(err))
